%\VignetteEngine{knitr::knitr}
%\VignetteIndexEntry{02 Basic Exercises}

# Some R data manipulation and plotting exercises

We are going to use a few small datasets to practice our R skills and see what we can learn about the datasets themselves.  These exercises are meant to let you explore and I do not provide answers for all exercises.  You can discuss with your colleagues and with instructors.  Not all exercises have only one best answer.

## Iris data

The _Iris_ data represent the famous (Fisher's or Anderson's) iris data set gives the
measurements in centimeters of the variables sepal length and
width and petal length and width, respectively, for 50 flowers
from each of 3 species of iris.  The species are _Iris setosa_,
_versicolor_, and _virginica_.

To get started, we can load the data using:

```{r}
data(iris)
```

1. Use your R skills to learn a little about the size and structure of the iris data.  Consider using `head`,`tail`,`dim`,`nrow`,`class`.

```{r number1,results='hide',eval=TRUE,echo=FALSE}
class(iris)
colnames(iris)
head(iris)
tail(iris)
dim(iris)
nrow(iris)
complete.cases(iris)
str(iris)
```

2. Get some summary statistics for the dataset.  Consider tools like `summary`, `mean`, `median`, `sd`, `IQR`. 

```{r number2,results='hide',eval=TRUE,echo=FALSE}
summary(iris)
apply(iris[,1:4],2,mean)
apply(iris[,1:4],2,median)
apply(iris[,1:4],2,IQR)
apply(iris[,1:4],2,sd)
```

3. Use some plots to investigate the relationships between the variables.

```{r number3,results='hide',eval=TRUE,echo=FALSE,fig.show='hide'}
plot(iris$Sepal.Length,iris$Sepal.Width)
plot(iris$Sepal.Length,iris$Sepal.Width,col=iris$Species)
plot(iris$Sepal.Length,iris$Sepal.Width,pch=as.numeric(iris$Species))
pairs(iris[,1:4])
pairs(iris[,1:4],col=iris$Species)
# Switch to ggplot2
library(ggplot2)
ggplot(iris,aes(x=Species,y=Sepal.Length)) + geom_boxplot()
ggplot(iris,aes(x=Species,y=Sepal.Width)) + geom_boxplot()
ggplot(iris,aes(x=Species,y=Petal.Width)) + geom_boxplot()
ggplot(iris,aes(x=Petal.Width,y=Sepal.Width)) + geom_point()
ggplot(iris,aes(x=Petal.Width,y=Sepal.Width,color=Species)) + geom_point()
```

4. Quantify the relationships between the quantitative variables.

```{r number4,results='hide',eval=TRUE,echo=FALSE,fig.show='hide'}
cor(iris[,1:4])
cor.test(iris$Sepal.Length,iris$Sepal.Width)
ggplot(iris,aes(x=Sepal.Length,y=Sepal.Width,color=Species)) + geom_point()
pairs(iris[,1:4],col=iris$Species)
cor.test(iris$Petal.Length,iris$Petal.Width)
```

5. Bonus: Use the randomForest package to predict the flower species based on the data.

```{r number5,results='hide',eval=TRUE,echo=FALSE,fig.show='hide'}
library(randomForest)
res = randomForest(Species ~ .,data=iris)
res
varImpPlot(res)
```

## Behavioral Risk Factor Surveillance System

You have been given a dataset that represents basic measurements of people over time.  Explore the data interactively to learn about trends or other features of interest in the data.  

To load the data:

```{r readBRFSS}
brfss = read.csv(system.file(package='SDIntroToR','extdata/BRFSS-subset.csv'))
```

Explore the data in any way that you like, including plots, summaries, and data manipulations.  As an additional exercise, create a function that takes a vector of weights (in kg) and heights (in cm) and returns the Body Mass Index (BMI). 

http://www.cdc.gov/healthyweight/assessing/bmi/adult_bmi/index.html#Interpreted
 
